---
title: HTTP知识点梳理
tags:
  - JavaScript
  - ES6
date: 2018-06-03
---

## 一、访问URL
**从输入URL到页面加载成功发生了什么?**

（1）浏览器最开始会去做 Redirect ，因为浏览器可能记录了这个地址已经永久跳转到了一个新的地址，所以一开始它会去判断需不需要 Redirect 。

（2）浏览器会去看缓存，因为可能你请求的资源已经缓存过了，所以会先看 App catch 是否有缓存，如果没有缓存才去服务器请求资源。

（3）去 DNS 查找域名对应的 IP 地址，即 DNS 解析。有了 IP 地址， 才会创建 TCP 连接，而且要经过 TCP 三次握手才能建立连接。

> 如果是 HTTPS 连接，要创建一个 HTTPS 的连接，过程跟三次握手不一样，因为要建立一个能保证数据安全传输的过程。

（4）连接创建成功后才可以发送 HTTP 请求的数据包，发送完成服务器接收并处理，最终返回请求结果才算完成了一次 HTTP 请求。

## 二、HTTP版本
在最初的 HTTP/0.9 版本，是只有一个命令 GET ，没有 HEADER 等描述数据的信息，服务器发送完毕，就关闭 TCP 连接。

HTTP/1.0 增加了很多命令，增加了 status code 和 header。

HTTP/1.1 实现了持久连接，pipeline。

HTTP2 所有数据以二进制传输，同一个连接里面发送多个请求不再需要按照顺序来，头信息压缩以及推送等提高效率的功能。

<!-- more -->

## 三、HTTP 三次握手
为什么要三次握手？为了规避网络传输中的服务器延时而导致的服务器开销问题。
首先客户端发起一个要连接的数据包请求到服务端，服务端接收到了该数据包就知道有一个客户要跟它创建连接，那么服务端会开启一个 TCP 端口，并返回一个数据包给客户端。客户端收到后就知道服务端已经允许我去创建这个连接了，然后会进行第三次握手。第三次握手是为了保证服务端知道客户端已经接收到了服务端的同意请求，这样服务端才会确认开启端口。

## 四、创建一个 HTTP 服务
在 node 环境下运行

```js
const http = require('http')

http.createServer(function(request, response){
  response.end('Hello http.')
}).listen(8081)

console.log('Server listening on 8081')
```
## 五、HTTP 客户端




